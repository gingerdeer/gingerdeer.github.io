<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.2.0
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <meta charset="utf-8">
<title>Quadratic programming in Python: portfolio optimization &#8211; Pena, WTF?</title>




<!-- Twitter Cards -->
<meta name="twitter:title" content="Quadratic programming in Python: portfolio optimization">




<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/lines.png">

<!-- Open Graph -->
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Quadratic programming in Python: portfolio optimization">

<meta property="og:url" content="http://localhost:4000/drafts/2020-03-24-portfolio.html">
<meta property="og:site_name" content="Pena, WTF?">





<link rel="canonical" href="http://localhost:4000/drafts/2020-03-24-portfolio.html">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Pena, WTF? Feed">

<!-- https://t.co/dKP3o1e -->

<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Jekyll SEO plugin -->
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Quadratic programming in Python: portfolio optimization | Pena, WTF?</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Quadratic programming in Python: portfolio optimization" />
<meta name="author" content="pena" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="the bestest site in the multiverse" />
<meta property="og:description" content="the bestest site in the multiverse" />
<link rel="canonical" href="http://localhost:4000/drafts/2020-03-24-portfolio.html" />
<meta property="og:url" content="http://localhost:4000/drafts/2020-03-24-portfolio.html" />
<meta property="og:site_name" content="Pena, WTF?" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Quadratic programming in Python: portfolio optimization" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"pena"},"description":"the bestest site in the multiverse","headline":"Quadratic programming in Python: portfolio optimization","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/lines.png"},"name":"pena"},"url":"http://localhost:4000/drafts/2020-03-24-portfolio.html"}</script>
<!-- End Jekyll SEO tag -->


<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">


  <body class="layout--page  quadratic-programming-in-python-portfolio-optimization">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <div class="navigation-wrapper">
	<a href="#menu-toggle" id="menu-toggle">Menu</a>
	<nav role="navigation" id="primary-nav" class="site-nav animated drop">
	    <ul>
      
		    
		    <li><a href="http://localhost:4000/" >Home</a></li>
		  
		    
		    <li><a href="http://localhost:4000/about" >About</a></li>
		  
		    
		    <li><a href="http://localhost:4000/math/" >Math</a></li>
		  
		    
		    <li><a href="http://localhost:4000/music/" >Music</a></li>
		  
		    
		    <li><a href="http://localhost:4000/other/" >Other</a></li>
		  
		    
		    <li><a href="http://localhost:4000/code/" >Code</a></li>
		  
		    
		    <li><a href="http://localhost:4000/katalikko/" >Katalikko</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->


<header class="masthead">
	<div class="wrap">
      
  		<a href="http://localhost:4000/" class="site-logo" rel="home" title="Pena, WTF?"><img id="sitelogo" src="http://localhost:4000/images/lines.png" width="200" height="200" alt="Pena, WTF? logo" class="site-logo-img animated fadeInDown"></a>
      
    <!--
 <h1 class="site-title animated fadeIn"><a href="http://localhost:4000/">Pena, WTF?</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">the bestest site in the multiverse<br></h2>
     -->
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<!-- end of navigation.html -->

    <header class="masthead">
  <div class="wrap">
<!-- fuck this
    
      <a href="/" class="site-logo" rel="home" title="Pena, WTF?">
        <img src="/lines.png" class="site-logo-img animated fadeInDown" alt="Pena, WTF?">
      </a>
-->
    
    
    
      
        <div class="site-title animated fadeIn"><a href="/">Pena, WTF?</a></div>
      
       <!--
      <p class="site-description animated fadeIn" itemprop="description">the bestest site in the multiverse<br></p>
         -->
      <div class="site-description animated fadeIn" id="inspirational"> </div>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article>
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title">Quadratic programming in Python: portfolio optimization</h1>
        
      </header>
      <div class="page-content">
        <p>A fun topic somewhere in between Finance, Optimization and Mathematics is the classical Markowitz theory of portfolio optimization, also known as the mean-variance model. Let’s dive right in to see what it’s all about.</p>

<h1 id="introduction">Introduction</h1>

<p>We’ll build the scenario with all the necessary definitions, and then move right into implementing the math using Python.</p>

<p>The scenario is as follows. There are N total stocks, each with their own price p_i. We wish to build a portfolio consisting of held amounts of each stock, such that the (expected) return on investment at the end of a set investment period is maximized.
Denote:</p>
<ul>
  <li>\(X\) is our portfolio vector</li>
  <li>\(t\) is the end of our investment period</li>
  <li>\(p_i\) is the price of asset number i at time 0</li>
  <li>\(p_i'\) is the (expected) price of asset number i at time \(t\) - this is a random variable</li>
  <li>The rate of return on asset number i is denoted \(r_i = \frac{p_i'-p_i}{p_i}\)</li>
  <li>The ratio \(R_i = p_i'/p_i\) is alled the return on asset i.</li>
  <li>Denote by $R$ the vector of returns</li>
  <li>Let C be the covariance matrix of R</li>
</ul>

<p>For simplicity, let’s set our total budget as one. The portfolio is thus a vector X such that</p>

<p>\(\Sum X = 1\).</p>

<p>The expected return is defined as \(X^TR\), being the sum of held amounts of each asset multiplied by their return. The risk associated with a portfolio is defined through the covariance as \(X^TCX\).</p>

<p>The problem at hand can be formulated as minimizing the risk, subject to a minimum expected return. Alternatively and equivalently, one can formulate it as maximizing the profit, subject to a set level of risk.</p>

<p>This leads to what is called a Quadratic Programming (QP) problem. It is a particular special case of Convex Programming (CP), and there are <em>numerous</em> tools out there for solving problems such as this. They rely on the mathematics of Convex Optimization, certainly a fun area to dive into. For our practical purposes here, it is enough to know that the convexity of the problem setup implies a single optimal solution to our problem for any particular input.</p>

<h1 id="implementation">Implementation</h1>

<h1 id="disclaimer">Disclaimer</h1>

<p>This is an overview of the Markowitz portfolio algorithm, nothing else. Do not throw money on any investment strategy just because of some fool on the internets.</p>

<h1 id="further-reading">Further reading</h1>

<p><a href="https://se.mathworks.com/help/finance/portfolio-optimization-theory-mv.html">MathWorks</a>
<a href="https://se.mathworks.com/help/optim/ug/quadratic-programming-portfolio-optimization.html">MathWorks example</a>
<a href="https://docs.mosek.com/portfolio-cookbook/markowitz.html">MOSEK Portfolio Optimization Cookbook</a>
<a href="https://en.wikipedia.org/wiki/Markowitz_model">Wikipedia</a></p>



        
      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="social-icons"><a class="social-icon" href="https://github.com/gingerdeer"><i class="fab fa-github-square fa-2x" title="GitHub"></i></a><a class="social-icon" href="https://www.linkedin.com/in/pentti-sunila-a967a1123/"><i class="fab fa-linkedin fa-2x" title="LinkedIn"></i></a><a class="social-icon" href="https://soundcloud.com/gidetrix"><i class="fab fa-soundcloud fa-2x" title="SoundCloud"></i></a><a class="social-icon" href="https://dream-lands.bandcamp.com/"><i class="fab fa-bandcamp fa-2x" title="Bandcamp"></i></a><a class="social-icon" href="https://twitter.com/_penatrix"><i class="fab fa-twitter fa-2x" title="Twitter"></i></a></div><div class="copyright">
    
      <p>&copy; 2024 Pena, WTF?. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script type="text/javascript">
  var BASE_URL = 'http://localhost:4000';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<!-- <script src="http://localhost:4000/assets/js/scripts.min.js"></script> -->
<script src="http://localhost:4000/assets/js/main.min.js"></script>
<script src="http://localhost:4000/assets/js/inspirational.js"></script>
<!-- <script src="http://localhost:4000/assets/js/main.js"></script> -->
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-161776959-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-161776959-1');
</script>

  </body>

</html>
